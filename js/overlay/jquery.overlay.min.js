(function(a){a.overlay={overlay:null,setting:null,init:function(){var b="simple-overlay";var d=a("<div />",{id:b});var c='<div class="message"><span class="text"></span></div><div class="dialog"><p class="title"></p><p class="text"></p><div class="control"><button type="button" class="OK">OK</button><button type="button" class="Cancel">Cancel</button></div></div>';
d.html(c);a("body").append(d);overlay=a("#"+b);return this;},destroy:function(){overlay.remove();},show:function(c){var e={dialog:false,title:null,text:"よろしいですか？",okFunc:null,cancelFunc:null,onlyOK:true,fade:true,autoHide:true};
setting=a.extend(e,c);if(!setting.dialog){autoHide=false;}if(setting.title!==null){overlay.find(".title").html(setting.title).show();}else{overlay.find(".title").hide();
}if(setting.onlyOK){overlay.find("button.Cancel").hide();}else{overlay.find("button.Cancel").show();}overlay.find(".control").on("click","button.OK",function(){if(a.isFunction(setting.okFunc)){setting.okFunc.call(this);
}if(setting.autoHide){a.overlay.hide();}return false;}).on("click","button.Cancel",function(){if(a.isFunction(setting.cancelFunc)){setting.cancelFunc.call(this);
}a.overlay.hide();return false;});var b=(setting.dialog)?"dialog":"message";var d=overlay.find("."+b);d.find(".text").html(setting.text);if(setting.fade===true){overlay.addClass(b).fadeIn("fast");
}else{overlay.addClass(b).show();}d.css({height:d.outerHeight(),top:0,bottom:0,});},hide:function(){var b=(setting.dialog)?"dialog":"message";if(setting.fade){overlay.removeClass(b).fadeOut("fast");
}else{overlay.removeClass(b).hide();}overlay.find("."+b).attr("style","");},update:function(d){var c=a.extend(true,{},setting);setting=a.extend(setting,d);
if(setting.title!==null){overlay.find(".title").html(setting.title).show();}if(setting.onlyOK){overlay.find("button.Cancel").hide();}else{overlay.find("button.Cancel").show();
}overlay.find(".control").off().on("click","button.OK",function(){if(a.isFunction(setting.okFunc)){setting.okFunc.call(this);}if(setting.autoHide){a.overlay.hide();
}return false;}).on("click","button.Cancel",function(){if(a.isFunction(setting.cancelFunc)){setting.cancelFunc.call(this);}if(setting.autoHide){a.overlay.hide();
}return false;});if(c.dialog!==setting.dialog){overlay.removeClass("dialog message").hide();}var b=(setting.dialog)?"dialog":"message";var e=overlay.find("."+b);
e.attr("style","");e.find(".text").html(setting.text);overlay.addClass(b).show();e.css({height:e.outerHeight(),top:0,bottom:0,});}};})(jQuery);